@model Clavis.Paging.PaginatedList<Clavis.ViewModels.UprawnieniaView>
@using Microsoft.AspNetCore.Http;


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div style="background-color: #4a4e69; margin-top: 100px; margin-left: auto; margin-right:auto; min-height:50%" class="container login-box">
    <div class="box-title text-center">
        <h3 style="color: #e5e5e5; margin-bottom:10px; margin-top:20px;">Sale dostępne dla użytkownika @ViewBag.User.Imie @ViewBag.User.Nazwisko [ @ViewBag.User.UsersId ]</h3>

        @{
            var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
            var nextDisabled = !Model.HasNextPage ? "disabled" : "";
        }

        <a style="text-decoration:none;" asp-controller="Manager" asp-action="PermissionAdd" asp-route-user_id="@ViewBag.User.UsersId">
            <div class="login-button">
                Dodaj uprawnienie
            </div>
        </a>

        <div class="row text-center">
            <div class="col-4">
                <a asp-action="Permissions" type="submit" class="btn btn-default page-button @prevDisabled">Poprzednia</a>
            </div>
            <div class="col-4 page-info">
                @if (ViewBag.totalPages != 0)
                {
                    <h5>Strona @ViewBag.pageIndex / @ViewBag.totalPages</h5>
                }
            </div>
            <div class="col-4">
                <a asp-action="Permissions" type="submit" class="btn btn-default page-button @nextDisabled">Następna</a>
            </div>
        </div>

        <div class="container room-list">
            @{
                foreach (var item in Model)
                {
                    <a style="text-decoration: none;" asp-controller="Manager" asp-action="Room" asp-route-room_id="@item.room.RoomsId">
                        <div class="col-12 res-item">
                            <h3>[ @item.ID ] @item.room.Numer</h3>
                            <h4>@item.room.Opis </h4>
                        </div>
                    </a>
                }
            }
        </div>
        @if (ViewBag.totalPages == 0)
        {
            <div class="col-12 text-center">
                <h3>Nie znaleziono uprawnienia</h3>
            </div>
        }
        <div class="form-check">
            <form method="post" asp-controller="Manager" asp-action="PermissionDelete" asp-route-user_id="@ViewBag.User.UsersId">
                <h4>Usuwanie uprawnienia</h4>
                <h5>Wprowadź numer ID uprawnienia jako potwierdzenie</h5>
                <input type="text" name="permission_id" />
                @if (ViewBag.BadId == true)
                {
                    <h5 style="color:#ff6a00;">Wprowadzony numer ID nie jest poprawny</h5>
                }
                <button class="login-button" type="submit">Usuń</button>
            </form>
        </div>

    </div>
</div>



